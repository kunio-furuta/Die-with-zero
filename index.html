<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ãƒ€ã‚¤ãƒ»ã‚¦ã‚£ã‚ºãƒ»ã‚¼ãƒ­</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.4.1/chart.umd.min.js"></script>
<style>
  * { box-sizing: border-box; margin: 0; padding: 0; }
  body {
    font-family: 'Hiragino Kaku Gothic ProN', 'Meiryo', sans-serif;
    background: linear-gradient(135deg, #0f0c29, #302b63, #24243e);
    min-height: 100vh; color: #fff; padding: 20px;
  }
  .header { text-align: center; padding: 30px 0 20px; }
  .header h1 {
    font-size: 2.2rem; font-weight: 900;
    background: linear-gradient(90deg, #f7971e, #ffd200);
    -webkit-background-clip: text; -webkit-text-fill-color: transparent;
  }
  .header p { color: #aaa; margin-top: 8px; font-size: 0.9rem; }
  .container { max-width: 1100px; margin: 0 auto; }

  /* ã‚»ãƒ¼ãƒ–ãƒãƒ¼ */
  .save-bar {
    display: flex; align-items: center; justify-content: flex-end; gap: 12px;
    margin-bottom: 16px; flex-wrap: wrap;
  }
  .btn-save {
    background: linear-gradient(90deg, #f7971e, #ffd200);
    border: none; border-radius: 10px; color: #1a1a2e;
    font-weight: 700; font-size: 0.9rem; padding: 10px 22px;
    cursor: pointer; display: flex; align-items: center; gap: 6px;
    transition: opacity 0.2s;
  }
  .btn-save:hover { opacity: 0.85; }
  .save-url-box {
    display: none; background: rgba(255,255,255,0.07);
    border: 1px solid rgba(255,210,0,0.4); border-radius: 10px;
    padding: 10px 14px; font-size: 0.8rem; color: #ffd200;
    word-break: break-all; margin-bottom: 8px;
  }
  .save-url-box.show { display: block; }
  .btn-copy {
    background: rgba(255,210,0,0.15); border: 1px solid rgba(255,210,0,0.4);
    color: #ffd200; border-radius: 8px; padding: 6px 14px;
    cursor: pointer; font-size: 0.8rem; white-space: nowrap;
  }
  .btn-copy:hover { background: rgba(255,210,0,0.28); }
  .save-toast {
    display: none; background: rgba(81,207,102,0.2); border: 1px solid rgba(81,207,102,0.5);
    color: #51cf66; border-radius: 8px; padding: 8px 16px; font-size: 0.85rem;
  }
  .save-toast.show { display: inline-block; }

  .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px; }
  @media (max-width: 700px) {
    .grid { grid-template-columns: 1fr; }
    .summary { grid-template-columns: 1fr 1fr !important; }
    .header h1 { font-size: 1.6rem; }
    .save-bar { justify-content: center; }
  }
  .card { background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); border-radius: 16px; padding: 20px; }
  .card h2 { font-size: 1rem; color: #ffd200; margin-bottom: 16px; }
  .form-group { margin-bottom: 14px; }
  label { display: block; font-size: 0.8rem; color: #bbb; margin-bottom: 4px; }
  .input-wrap { position: relative; }
  .input-wrap .unit { position: absolute; right: 10px; top: 50%; transform: translateY(-50%); color: #888; font-size: 0.8rem; pointer-events: none; }
  input.comma-input, input.plain-input {
    width: 100%; padding: 9px 36px 9px 12px; border-radius: 8px;
    border: 1px solid rgba(255,255,255,0.15);
    background: rgba(255,255,255,0.08); color: #fff;
    font-size: 0.95rem; outline: none; text-align: right;
  }
  input.comma-input:focus, input.plain-input:focus { border-color: #ffd200; }
  input[type="text"].name-input {
    width: 100%; padding: 9px 12px; border-radius: 8px;
    border: 1px solid rgba(255,255,255,0.15);
    background: rgba(255,255,255,0.08); color: #fff; font-size: 0.95rem; outline: none;
  }
  input[type="text"].name-input:focus { border-color: #ffd200; }
  .side-job-section { background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.08); border-radius: 12px; padding: 14px; margin-top: 12px; }
  .side-job-section h3 { font-size: 0.85rem; color: #74c0fc; margin-bottom: 12px; }
  .age-range { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
  .extra-item { display: flex; gap: 8px; margin-bottom: 8px; align-items: center; }
  .extra-item .name-input { flex: 1.5; }
  .extra-item .comma-wrap { flex: 1; position: relative; }
  .extra-item .comma-wrap input { width: 100%; padding: 9px 30px 9px 12px; border-radius: 8px; border: 1px solid rgba(255,255,255,0.15); background: rgba(255,255,255,0.08); color: #fff; font-size: 0.95rem; outline: none; text-align: right; }
  .extra-item .comma-wrap input:focus { border-color: #ffd200; }
  .extra-item .comma-wrap .unit { position: absolute; right: 8px; top: 50%; transform: translateY(-50%); color: #888; font-size: 0.75rem; pointer-events: none; }
  .btn-del { background: rgba(255,80,80,0.3); border: none; color: #ff8080; border-radius: 8px; padding: 0 12px; cursor: pointer; font-size: 1rem; height: 38px; }
  .btn-del:hover { background: rgba(255,80,80,0.6); }
  .btn-add { background: rgba(255,210,0,0.12); border: 1px dashed rgba(255,210,0,0.5); color: #ffd200; border-radius: 8px; padding: 8px 16px; cursor: pointer; font-size: 0.85rem; width: 100%; margin-top: 4px; }
  .btn-add:hover { background: rgba(255,210,0,0.22); }
  .summary { display: grid; grid-template-columns: repeat(4,1fr); gap: 16px; margin-bottom: 20px; }
  .summary-card { background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); border-radius: 14px; padding: 16px; text-align: center; }
  .summary-card .slabel { font-size: 0.75rem; color: #aaa; margin-bottom: 6px; }
  .summary-card .value { font-size: 1.4rem; font-weight: 700; }
  .gold { color: #ffd200; } .red { color: #ff6b6b; } .green { color: #51cf66; }
  .chart-card { background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); border-radius: 16px; padding: 20px; margin-bottom: 20px; }
  .chart-card h2 { font-size: 1rem; color: #ffd200; margin-bottom: 16px; }
  .warn-banner { background: rgba(255,80,80,0.15); border: 1px solid rgba(255,80,80,0.4); border-radius: 10px; padding: 12px 18px; color: #ff8080; font-size: 0.9rem; margin-bottom: 16px; display: none; }
  .footer { text-align: center; color: #555; font-size: 0.75rem; padding: 20px 0; }
  .divider { border: none; border-top: 1px solid rgba(255,255,255,0.08); margin: 12px 0; }
</style>
</head>
<body>
<div class="container">
  <div class="header">
    <h1>ğŸ’€ ãƒ€ã‚¤ãƒ»ã‚¦ã‚£ã‚ºãƒ»ã‚¼ãƒ­</h1>
    <p>æ­»ã¬ã¨ãã«è³‡ç”£ã‚’ã‚¼ãƒ­ã«ã™ã‚‹ â€” äººç”Ÿã‚’æœ€å¤§é™ã«è±Šã‹ã«ä½¿ã†ãŸã‚ã®è¨ˆç®—ãƒ„ãƒ¼ãƒ«</p>
  </div>

  <!-- ã‚»ãƒ¼ãƒ–ãƒãƒ¼ -->
  <div class="save-bar">
    <span class="save-toast" id="saveToast">âœ… URLã‚’ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸï¼ãƒ–ãƒƒã‚¯ãƒãƒ¼ã‚¯ã«ä¿å­˜ã—ã¦ãã ã•ã„</span>
    <button class="btn-save" onclick="saveData()">ğŸ’¾ ã‚»ãƒ¼ãƒ–ï¼ˆURLã«ä¿å­˜ï¼‰</button>
  </div>
  <div class="save-url-box" id="saveUrlBox">
    <div id="saveUrlText"></div>
    <button class="btn-copy" onclick="copyUrl()" style="margin-top:8px">ğŸ“‹ URLã‚’ã‚³ãƒ”ãƒ¼</button>
  </div>

  <div id="warnBanner" class="warn-banner"></div>
  <div class="summary">
    <div class="summary-card"><div class="slabel">ä»Šæ—¥ä½¿ãˆã‚‹é‡‘é¡</div><div class="value gold" id="sumDaily">â€”</div><div style="font-size:0.75rem;color:#888">å††/æ—¥</div></div>
    <div class="summary-card"><div class="slabel">100æ­³æ™‚ã®è³‡ç”£ or ã‚¼ãƒ­å¹´é½¢</div><div class="value" id="sumZeroAge">â€”</div></div>
    <div class="summary-card"><div class="slabel">ç”Ÿæ¶¯ç·åå…¥</div><div class="value green" id="sumTotalIncome">â€”</div><div style="font-size:0.75rem;color:#888">å††</div></div>
    <div class="summary-card"><div class="slabel">ç”Ÿæ¶¯ç·æ”¯å‡º</div><div class="value red" id="sumTotalExpense">â€”</div><div style="font-size:0.75rem;color:#888">å††</div></div>
  </div>

  <div class="grid">
    <div class="card">
      <h2>ğŸ‘¤ åŸºæœ¬æƒ…å ±</h2>
      <div class="form-group"><label>ç¾åœ¨ã®å¹´é½¢ï¼ˆæ­³ï¼‰</label><div class="input-wrap"><input class="plain-input" type="text" id="age" value="40"><span class="unit">æ­³</span></div></div>
      <div class="form-group"><label>ç¾åœ¨ã®ç·è³‡ç”£ï¼ˆå††ï¼‰</label><div class="input-wrap"><input class="comma-input" type="text" id="assets" value="10,000,000"><span class="unit">å††</span></div></div>
      <div class="form-group"><label>è³‡ç”£é‹ç”¨åˆ©å›ã‚Šï¼ˆ%/å¹´ï¼‰</label><div class="input-wrap"><input class="plain-input" type="text" id="returnRate" value="3"><span class="unit">%</span></div></div>
    </div>
    <div class="card">
      <h2>ğŸ’° åå…¥</h2>
      <div class="form-group"><label>ç¾åœ¨ã®å¹´åï¼ˆå††/å¹´ï¼‰</label><div class="input-wrap"><input class="comma-input" type="text" id="annualIncome" value="6,500,000"><span class="unit">å††</span></div></div>
      <div class="form-group"><label>å°±åŠ´çµ‚äº†å¹´é½¢ï¼ˆæ­³ï¼‰</label><div class="input-wrap"><input class="plain-input" type="text" id="retireAge" value="65"><span class="unit">æ­³</span></div></div>
      <hr class="divider">
      <div class="form-group"><label>å¹´é‡‘å—çµ¦é–‹å§‹å¹´é½¢ï¼ˆæ­³ï¼‰</label><div class="input-wrap"><input class="plain-input" type="text" id="pensionStartAge" value="65"><span class="unit">æ­³</span></div></div>
      <div class="form-group"><label>å¹´é‡‘å—çµ¦é¡ï¼ˆå††/æœˆï¼‰</label><div class="input-wrap"><input class="comma-input" type="text" id="pensionMonthly" value="150,000"><span class="unit">å††</span></div></div>
      <div class="side-job-section">
        <h3>ğŸ’¼ å‰¯æ¥­åå…¥</h3>
        <div class="age-range">
          <div class="form-group"><label>å‰¯æ¥­ é–‹å§‹å¹´é½¢</label><div class="input-wrap"><input class="plain-input" type="text" id="sideStartAge" value="40"><span class="unit">æ­³</span></div></div>
          <div class="form-group"><label>å‰¯æ¥­ çµ‚äº†å¹´é½¢</label><div class="input-wrap"><input class="plain-input" type="text" id="sideEndAge" value="70"><span class="unit">æ­³</span></div></div>
        </div>
        <div class="form-group"><label>å‰¯æ¥­ã®å¹´åå…¥é¡ï¼ˆå††/å¹´ï¼‰</label><div class="input-wrap"><input class="comma-input" type="text" id="sideIncome" value="1,000,000"><span class="unit">å††</span></div></div>
      </div>
    </div>
    <div class="card">
      <h2>ğŸ  æ¯æœˆã®æ”¯å‡º</h2>
      <div class="form-group"><label>å®¶è³ƒãƒ»ä½å±…è²»ï¼ˆå††/æœˆï¼‰</label><div class="input-wrap"><input class="comma-input" type="text" id="rent" value="80,000"><span class="unit">å††</span></div></div>
      <div class="form-group"><label>æ¯æœˆã®ç”Ÿæ´»è²»ï¼ˆå††/æœˆï¼‰</label><div class="input-wrap"><input class="comma-input" type="text" id="living" value="150,000"><span class="unit">å††</span></div></div>
    </div>
    <div class="card">
      <h2>âœˆï¸ å¹´é–“ã®ç‰¹åˆ¥æ”¯å‡ºãƒ»ãã®ä»–</h2>
      <div class="form-group"><label>ç‰¹åˆ¥ãªå‡ºè²»ï¼ˆå††/å¹´ï¼‰</label><div class="input-wrap"><input class="comma-input" type="text" id="special" value="500,000"><span class="unit">å††</span></div></div>
      <div id="extraItems"></div>
      <button class="btn-add" onclick="addExtraItem()">ï¼‹ ãã®ä»–è²»ç›®ã‚’è¿½åŠ </button>
    </div>
  </div>

  <div class="chart-card"><h2>ğŸ“ˆ è³‡ç”£æ¨ç§»ï¼ˆç¾åœ¨ã€œ100æ­³ï¼‰</h2><canvas id="assetChart" height="80"></canvas></div>
  <div class="chart-card"><h2>ğŸ“… 1æ—¥ã‚ãŸã‚Šã«ä½¿ãˆã‚‹é‡‘é¡ã®æ¨ç§»</h2><canvas id="dailyChart" height="80"></canvas></div>
  <div class="footer">â€» ã“ã®ãƒ„ãƒ¼ãƒ«ã¯ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã§ã™ã€‚å®Ÿéš›ã®ç¨é‡‘ãƒ»ã‚¤ãƒ³ãƒ•ãƒ¬ç­‰ã¯è€ƒæ…®ã—ã¦ã„ã¾ã›ã‚“ã€‚</div>
</div>

<script>
let extraItems = [], assetChart, dailyChart;

// â”€â”€ ã‚«ãƒ³ãƒå‡¦ç† â”€â”€
function toNum(id) {
  const el = document.getElementById(id);
  return el ? parseFloat(el.value.replace(/,/g, '')) || 0 : 0;
}
function formatComma(str) {
  const raw = str.replace(/,/g, '').replace(/[^\d]/g, '');
  return raw ? parseInt(raw, 10).toLocaleString('ja-JP') : '';
}
function attachComma(el) {
  if (!el) return;
  el.addEventListener('focus', function() { this.value = this.value.replace(/,/g, ''); });
  el.addEventListener('blur', function() { if (this.value) this.value = formatComma(this.value); calculate(); });
  el.addEventListener('input', calculate);
}
document.querySelectorAll('.comma-input').forEach(attachComma);
document.querySelectorAll('.plain-input').forEach(el => el.addEventListener('input', calculate));

// â”€â”€ ãã®ä»–è²»ç›® â”€â”€
function addExtraItem(name='', amount='') {
  extraItems.push({ id: Date.now(), name, amount });
  renderExtraItems();
  calculate();
}
function removeExtraItem(id) {
  extraItems = extraItems.filter(e => e.id !== id);
  renderExtraItems();
  calculate();
}
function renderExtraItems() {
  document.getElementById('extraItems').innerHTML = extraItems.map(e => `
    <div class="extra-item">
      <input type="text" class="name-input" placeholder="è²»ç›®å" id="ename-${e.id}" value="${e.name||''}" oninput="calculate()">
      <div class="comma-wrap">
        <input type="text" placeholder="0" id="eamt-${e.id}" value="${e.amount ? parseInt(e.amount).toLocaleString('ja-JP') : ''}"
          onfocus="this.value=this.value.replace(/,/g,'')"
          onblur="if(this.value)this.value=parseInt(this.value.replace(/,/g,'')).toLocaleString('ja-JP');calculate()"
          oninput="calculate()">
        <span class="unit">å††/å¹´</span>
      </div>
      <button class="btn-del" onclick="removeExtraItem(${e.id})">âœ•</button>
    </div>`).join('');
}

function fmt(n) {
  if (Math.abs(n) >= 1e8) return (n / 1e8).toFixed(1) + 'å„„';
  if (Math.abs(n) >= 1e4) return Math.round(n / 1e4) + 'ä¸‡';
  return Math.round(n).toLocaleString();
}

// â”€â”€ è¨ˆç®— â”€â”€
function calculate() {
  const ca = toNum('age'), a0 = toNum('assets'), rr = toNum('returnRate') / 100;
  const ai = toNum('annualIncome'), ra = toNum('retireAge');
  const psa = toNum('pensionStartAge'), pm = toNum('pensionMonthly');
  const ss = toNum('sideStartAge'), se = toNum('sideEndAge'), si = toNum('sideIncome');
  const extraTotal = extraItems.reduce((s, e) => {
    const el = document.getElementById('eamt-' + e.id);
    return s + (el ? parseFloat(el.value.replace(/,/g,'')) || 0 : 0);
  }, 0);
  const ae = toNum('rent')*12 + toNum('living')*12 + toNum('special') + extraTotal;

  const ages=[], ad=[], dd=[];
  let bal=a0, ti=0, te=0, za=null;
  for (let age=ca; age<=100; age++) {
    const inc = (age<ra?ai:0) + (age>=psa?pm*12:0) + (age>=ss&&age<=se?si:0);
    bal = bal*(1+rr) + inc - ae;
    ti+=inc; te+=ae;
    ages.push(age+'æ­³');
    ad.push(Math.round(bal));
    const rem=(100-age)*365;
    dd.push(rem>0?Math.round(bal/rem):0);
    if(bal<0&&!za) za=age;
  }

  const rem0=(100-ca)*365;
  document.getElementById('sumDaily').textContent = rem0>0 ? Math.round(a0/rem0).toLocaleString() : 'â€”';
  document.getElementById('sumTotalIncome').textContent = fmt(ti);
  document.getElementById('sumTotalExpense').textContent = fmt(te);

  const ze=document.getElementById('sumZeroAge'), wb=document.getElementById('warnBanner');
  if(za){
    ze.textContent=za+'æ­³ã§ã‚¼ãƒ­'; ze.className='value red';
    wb.style.display='block'; wb.textContent=`âš ï¸ ${za}æ­³ã§è³‡ç”£ãŒã‚¼ãƒ­ã«ãªã‚Šã¾ã™ã€‚æ”¯å‡ºã‚’è¦‹ç›´ã—ã¦ãã ã•ã„ã€‚`;
  } else {
    ze.textContent=fmt(ad[ad.length-1])+'å††æ®‹'; ze.className='value green';
    wb.style.display='none';
  }

  const sc={
    x:{ticks:{color:'#888',maxTicksLimit:13,font:{size:11}},grid:{color:'rgba(255,255,255,0.05)'}},
    y:{ticks:{color:'#888',font:{size:11},callback:v=>Math.abs(v)>=1e8?(v/1e8).toFixed(0)+'å„„':Math.abs(v)>=1e4?Math.round(v/1e4)+'ä¸‡':v},grid:{color:'rgba(255,255,255,0.05)'}}
  };
  if(assetChart) assetChart.destroy();
  assetChart=new Chart(document.getElementById('assetChart'),{
    type:'line', data:{labels:ages,datasets:[{data:ad,borderColor:'#ffd200',backgroundColor:'rgba(255,210,0,0.08)',fill:true,tension:0.3,pointRadius:0,borderWidth:2}]},
    options:{responsive:true,interaction:{mode:'index',intersect:false},plugins:{legend:{display:false},tooltip:{backgroundColor:'rgba(0,0,0,0.8)',callbacks:{label:c=>' è³‡ç”£æ®‹é«˜: '+c.parsed.y.toLocaleString()+' å††'}}},scales:sc}
  });
  if(dailyChart) dailyChart.destroy();
  dailyChart=new Chart(document.getElementById('dailyChart'),{
    type:'line', data:{labels:ages,datasets:[{data:dd,borderColor:'#74c0fc',backgroundColor:'rgba(116,192,252,0.08)',fill:true,tension:0.3,pointRadius:0,borderWidth:2}]},
    options:{responsive:true,interaction:{mode:'index',intersect:false},plugins:{legend:{display:false},tooltip:{backgroundColor:'rgba(0,0,0,0.8)',callbacks:{label:c=>' 1æ—¥ã‚ãŸã‚Š: '+c.parsed.y.toLocaleString()+' å††'}}},scales:sc}
  });
}

// â”€â”€ ã‚»ãƒ¼ãƒ–ãƒ»ãƒ­ãƒ¼ãƒ‰ï¼ˆURLãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿æ–¹å¼ï¼‰â”€â”€
function gatherData() {
  const extras = extraItems.map(e => {
    const nameEl = document.getElementById('ename-' + e.id);
    const amtEl  = document.getElementById('eamt-'  + e.id);
    return {
      name:   nameEl ? nameEl.value : '',
      amount: amtEl  ? amtEl.value.replace(/,/g,'') : ''
    };
  });
  return {
    age:            document.getElementById('age').value,
    assets:         toNum('assets'),
    returnRate:     document.getElementById('returnRate').value,
    annualIncome:   toNum('annualIncome'),
    retireAge:      document.getElementById('retireAge').value,
    pensionStartAge:document.getElementById('pensionStartAge').value,
    pensionMonthly: toNum('pensionMonthly'),
    sideStartAge:   document.getElementById('sideStartAge').value,
    sideEndAge:     document.getElementById('sideEndAge').value,
    sideIncome:     toNum('sideIncome'),
    rent:           toNum('rent'),
    living:         toNum('living'),
    special:        toNum('special'),
    extras
  };
}

function saveData() {
  const data = gatherData();
  const encoded = btoa(encodeURIComponent(JSON.stringify(data)));
  const url = location.href.split('?')[0] + '?d=' + encoded;
  document.getElementById('saveUrlText').textContent = url;
  document.getElementById('saveUrlBox').classList.add('show');
  // ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã¸ã‚³ãƒ”ãƒ¼
  if (navigator.clipboard) {
    navigator.clipboard.writeText(url).then(() => showToast());
  } else {
    // ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯
    const ta = document.createElement('textarea');
    ta.value = url; document.body.appendChild(ta);
    ta.select(); document.execCommand('copy');
    document.body.removeChild(ta);
    showToast();
  }
}

function copyUrl() {
  const url = document.getElementById('saveUrlText').textContent;
  if (navigator.clipboard) {
    navigator.clipboard.writeText(url).then(() => showToast());
  } else {
    const ta = document.createElement('textarea');
    ta.value = url; document.body.appendChild(ta);
    ta.select(); document.execCommand('copy');
    document.body.removeChild(ta);
    showToast();
  }
}

function showToast() {
  const t = document.getElementById('saveToast');
  t.classList.add('show');
  setTimeout(() => t.classList.remove('show'), 3000);
}

function loadFromUrl() {
  const params = new URLSearchParams(location.search);
  const d = params.get('d');
  if (!d) return;
  try {
    const data = JSON.parse(decodeURIComponent(atob(d)));
    const set = (id, val) => { const el=document.getElementById(id); if(el) el.value=val; };
    const setComma = (id, val) => { const el=document.getElementById(id); if(el) el.value=parseInt(val).toLocaleString('ja-JP'); };

    set('age',             data.age);
    setComma('assets',     data.assets);
    set('returnRate',      data.returnRate);
    setComma('annualIncome', data.annualIncome);
    set('retireAge',       data.retireAge);
    set('pensionStartAge', data.pensionStartAge);
    setComma('pensionMonthly', data.pensionMonthly);
    set('sideStartAge',    data.sideStartAge);
    set('sideEndAge',      data.sideEndAge);
    setComma('sideIncome', data.sideIncome);
    setComma('rent',       data.rent);
    setComma('living',     data.living);
    setComma('special',    data.special);

    if (data.extras && data.extras.length) {
      data.extras.forEach(ex => addExtraItem(ex.name, ex.amount));
    }
  } catch(e) {
    console.warn('ã‚»ãƒ¼ãƒ–ãƒ‡ãƒ¼ã‚¿ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸ', e);
  }
}

// èµ·å‹•æ™‚ã«URLã‹ã‚‰ãƒ­ãƒ¼ãƒ‰ â†’ è¨ˆç®—
loadFromUrl();
calculate();
</script>
</body>
</html>
